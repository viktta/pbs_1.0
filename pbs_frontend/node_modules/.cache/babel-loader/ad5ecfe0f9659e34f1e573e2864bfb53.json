{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\aleor\\\\Documents\\\\Projects\\\\pbs_1.0\\\\pbs_frontend\\\\src\\\\Components\\\\user\\\\login.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"../../styles/login.css\";\nimport { Link } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\nimport jwt_decode from \"jwt-decode\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\"\n    };\n    this.loginUser = this.loginUser.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  loginUser(e) {\n    e.preventDefault();\n    const {\n      username,\n      password\n    } = this.state;\n    axios.post(\"http://localhost:8000/api/gtv/\", {\n      username,\n      password\n    }).then(res => {\n      const inFiveMin = new Date(new Date().getTime() + 5 * 60);\n      Cookies.set(\"refresh_token\", res.data.refresh, {\n        expires: 15\n      });\n      Cookies.set(\"access_token\", res.data.access, {\n        expires: inFiveMin\n      });\n      const token = Cookies.get(\"refresh_token\");\n      const decode = jwt_decode(token);\n      localStorage.setItem(\"user_id\", decode.user_id);\n      Cookies.set('loged_in', true);\n      window.setTimeout(() => {\n        this.props.history.push(\"/\");\n        window.history.go(0);\n      }, 1000);\n    }).catch(() => {\n      alert(\"Wrong email or password, Please try again\");\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-main\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.loginUser,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"username\",\n          value: this.state.username,\n          onChange: this.handleChange,\n          placeholder: \"enter username\",\n          type: \"text\",\n          className: \"username-login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          value: this.state.password,\n          onChange: this.handleChange,\n          placeholder: \"enter password\",\n          type: \"password\",\n          className: \"password-login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"login-button\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register/\",\n          className: \"register-button\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/aleor/Documents/Projects/pbs_1.0/pbs_frontend/src/Components/user/login.js"],"names":["React","Component","axios","Link","Cookies","jwt_decode","Login","constructor","props","state","username","password","loginUser","bind","handleChange","e","setState","target","name","value","preventDefault","post","then","res","inFiveMin","Date","getTime","set","data","refresh","expires","access","token","get","decode","localStorage","setItem","user_id","window","setTimeout","history","push","go","catch","alert","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../../styles/login.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Cookies from \"js-cookie\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n    };\r\n    this.loginUser = this.loginUser.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  loginUser(e) {\r\n    e.preventDefault();\r\n    const { username, password } = this.state;\r\n    axios\r\n      .post(\"http://localhost:8000/api/gtv/\", {\r\n        username,\r\n        password,\r\n      })\r\n      .then((res) => {\r\n        const inFiveMin = new Date(new Date().getTime() + 5 * 60);\r\n        Cookies.set(\"refresh_token\", res.data.refresh, { expires: 15 });\r\n        Cookies.set(\"access_token\", res.data.access, { expires: inFiveMin });\r\n        const token = Cookies.get(\"refresh_token\");\r\n        const decode = jwt_decode(token);\r\n        localStorage.setItem(\"user_id\", decode.user_id);\r\n        Cookies.set('loged_in', true)\r\n        window.setTimeout(() => {\r\n          this.props.history.push(\"/\");\r\n          window.history.go(0);\r\n        }, 1000);\r\n      })\r\n      .catch(() => {\r\n        alert(\"Wrong email or password, Please try again\");\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"login-main\">\r\n        <form onSubmit={this.loginUser}>\r\n          <input\r\n            name=\"username\"\r\n            value={this.state.username}\r\n            onChange={this.handleChange}\r\n            placeholder=\"enter username\"\r\n            type=\"text\"\r\n            className='username-login'\r\n          ></input>\r\n          <br />\r\n          <br />\r\n          <input\r\n            name=\"password\"\r\n            value={this.state.password}\r\n            onChange={this.handleChange}\r\n            placeholder=\"enter password\"\r\n            type=\"password\"\r\n            className='password-login'\r\n          ></input>\r\n          <br />\r\n          <br />\r\n          <button type=\"submit\" className=\"login-button\">\r\n            Login\r\n          </button>\r\n          <Link to={\"/register/\"} className=\"register-button\">\r\n            Register\r\n          </Link>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}