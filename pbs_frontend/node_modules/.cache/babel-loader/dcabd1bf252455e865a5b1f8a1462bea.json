{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\aleor\\\\Documents\\\\Projects\\\\pbs_1.0\\\\pbs_frontend\\\\src\\\\Components\\\\user\\\\login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport '../../styles/login.css';\nimport { Link } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport jwt_decode from 'jwt-decode';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: ''\n    };\n    this.userLogin = this.userLogin.bind(this);\n    this.handleChangeOnUserInput = this.handleChangeOnUserInput.bind(this);\n  }\n\n  handleChangeOnUserInput(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  userLogin(e) {\n    e.preventDefault();\n    const {\n      username,\n      password\n    } = this.state;\n    axios.post('http://localhost:8000/api/gtv/', {\n      username,\n      password\n    }).then(res => {\n      const inFiveMin = new Date(new Date().getTime() + 5 * 60);\n      Cookies.set('refresh_token', res.data.refresh, {\n        expires: 15\n      });\n      Cookies.set('access_token', res.data.access, {\n        expires: inFiveMin\n      });\n      const token = Cookies.get('refresh_token');\n      const decode = jwt_decode(token);\n      localStorage.setItem('user_id', decode.user_id);\n      Cookies.set('loged_in', true);\n      window.setTimeout(() => {\n        this.props.history.push('/');\n        window.history.go(0);\n      }, 1000);\n    }).catch(() => {\n      alert('Wrong email or password, Please try again');\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-main\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.userLogin,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"username\",\n          value: this.state.username,\n          onChange: this.handleChangeOnUserInput,\n          placeholder: \"enter username\",\n          type: \"text\",\n          className: \"username-login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          value: this.state.password,\n          onChange: this.handleChangeOnUserInput,\n          placeholder: \"enter password\",\n          type: \"password\",\n          className: \"password-login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"login-button\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: '/register/',\n          className: \"register-button\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/aleor/Documents/Projects/pbs_1.0/pbs_frontend/src/Components/user/login.js"],"names":["React","Component","axios","Link","Cookies","jwt_decode","Login","constructor","props","state","username","password","userLogin","bind","handleChangeOnUserInput","e","setState","target","name","value","preventDefault","post","then","res","inFiveMin","Date","getTime","set","data","refresh","expires","access","token","get","decode","localStorage","setItem","user_id","window","setTimeout","history","push","go","catch","alert","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport '../../styles/login.css';\r\nimport { Link } from 'react-router-dom';\r\nimport Cookies from 'js-cookie';\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nclass Login extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tusername: '',\r\n\t\t\tpassword: ''\r\n\t\t};\r\n\t\tthis.userLogin = this.userLogin.bind(this);\r\n\t\tthis.handleChangeOnUserInput = this.handleChangeOnUserInput.bind(this);\r\n\t}\r\n\r\n\thandleChangeOnUserInput(e) {\r\n\t\tthis.setState({ [e.target.name]: e.target.value });\r\n\t}\r\n\r\n\tuserLogin(e) {\r\n\t\te.preventDefault();\r\n\t\tconst { username, password } = this.state;\r\n\t\taxios\r\n\t\t\t.post('http://localhost:8000/api/gtv/', {\r\n\t\t\t\tusername,\r\n\t\t\t\tpassword\r\n\t\t\t})\r\n\t\t\t.then((res) => {\r\n\t\t\t\tconst inFiveMin = new Date(new Date().getTime() + 5 * 60);\r\n\t\t\t\tCookies.set('refresh_token', res.data.refresh, { expires: 15 });\r\n\t\t\t\tCookies.set('access_token', res.data.access, { expires: inFiveMin });\r\n\t\t\t\tconst token = Cookies.get('refresh_token');\r\n\t\t\t\tconst decode = jwt_decode(token);\r\n\t\t\t\tlocalStorage.setItem('user_id', decode.user_id);\r\n\t\t\t\tCookies.set('loged_in', true);\r\n\t\t\t\twindow.setTimeout(() => {\r\n\t\t\t\t\tthis.props.history.push('/');\r\n\t\t\t\t\twindow.history.go(0);\r\n\t\t\t\t}, 1000);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\talert('Wrong email or password, Please try again');\r\n\t\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"login-main\">\r\n\t\t\t\t<form onSubmit={this.userLogin}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\tvalue={this.state.username}\r\n\t\t\t\t\t\tonChange={this.handleChangeOnUserInput}\r\n\t\t\t\t\t\tplaceholder=\"enter username\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclassName=\"username-login\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\tonChange={this.handleChangeOnUserInput}\r\n\t\t\t\t\t\tplaceholder=\"enter password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tclassName=\"password-login\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<button type=\"submit\" className=\"login-button\">\r\n\t\t\t\t\t\tLogin\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<Link to={'/register/'} className=\"register-button\">\r\n\t\t\t\t\t\tRegister\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}