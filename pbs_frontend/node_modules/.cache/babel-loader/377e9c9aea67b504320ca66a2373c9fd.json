{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\aleor\\\\Documents\\\\Projects\\\\pbs_1.0\\\\pbs_frontend\\\\src\\\\App.js\";\nimport axios from 'axios';\nimport React, { Component } from 'react';\nimport MainNav from './Components/nav/mainnav';\nimport Cookies from 'js-cookie';\nimport './styles/app.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    const access = Cookies.get('access_token');\n    const refresh = Cookies.get('refresh_token');\n    const username = localStorage.getItem('username');\n    const inFiveMin = new Date(new Date().getTime() + 5 * 60 * 1000);\n    const id = localStorage.getItem('user_id');\n    const loged = Cookies.get('loged_in');\n\n    if (access === undefined && loged) {\n      axios.post('http://localhost:8000/api/token/refresh/', {\n        refresh\n      }).then(res => {\n        Cookies.set('access_token', res.data.access, {\n          expires: inFiveMin\n        });\n        Cookies.set('refresh_token', res.data.refresh, {\n          expires: 15\n        });\n      }).catch(err => {\n        alert(err);\n      });\n    } else {//null\n    }\n\n    if (refresh === undefined && loged === true) {\n      const username = localStorage.getItem('username');\n      const password = Cookies.get('password');\n      axios.post('http://localhost:8000/api/gtv/', {\n        username,\n        password\n      }).then(res => {\n        Cookies.set('refresh_token', res.data.refresh, {\n          expires: 15\n        });\n      }).catch(err => {\n        alert(err);\n      });\n    } else {//null\n    }\n\n    if (username === null && loged === true) {\n      axios.get(`http://localhost:8000/api/uv/${id}/`, {\n        headers: {\n          Authorization: 'JWT ' + Cookies.get('access_token')\n        }\n      }).then(res => {\n        localStorage.setItem('username', res.data.username);\n        localStorage.setItem('email', res.data.email);\n        localStorage.setItem('first_name', res.data.first_name);\n        localStorage.setItem('last_name', res.data.last_name);\n        Cookies.set('password', res.data.password);\n      }).catch(err => {\n        alert(err);\n      });\n    } else {//null\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(MainNav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/aleor/Documents/Projects/pbs_1.0/pbs_frontend/src/App.js"],"names":["axios","React","Component","MainNav","Cookies","App","constructor","props","state","componentDidMount","access","get","refresh","username","localStorage","getItem","inFiveMin","Date","getTime","id","loged","undefined","post","then","res","set","data","expires","catch","err","alert","password","headers","Authorization","setItem","email","first_name","last_name","render"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport MainNav from './Components/nav/mainnav';\r\nimport Cookies from 'js-cookie';\r\nimport './styles/app.css';\r\n\r\nclass App extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst access = Cookies.get('access_token');\r\n\t\tconst refresh = Cookies.get('refresh_token');\r\n\t\tconst username = localStorage.getItem('username');\r\n\t\tconst inFiveMin = new Date(new Date().getTime() + 5 * 60 * 1000);\r\n\t\tconst id = localStorage.getItem('user_id');\r\n\t\tconst loged = Cookies.get('loged_in');\r\n\t\tif (access === undefined && loged) {\r\n\t\t\taxios\r\n\t\t\t\t.post('http://localhost:8000/api/token/refresh/', {\r\n\t\t\t\t\trefresh\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tCookies.set('access_token', res.data.access, { expires: inFiveMin });\r\n\t\t\t\t\tCookies.set('refresh_token', res.data.refresh, { expires: 15 });\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\talert(err);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\t//null\r\n\t\t}\r\n\r\n\t\tif (refresh === undefined && loged === true) {\r\n\t\t\tconst username = localStorage.getItem('username');\r\n\t\t\tconst password = Cookies.get('password');\r\n\t\t\taxios\r\n\t\t\t\t.post('http://localhost:8000/api/gtv/', {\r\n\t\t\t\t\tusername,\r\n\t\t\t\t\tpassword\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tCookies.set('refresh_token', res.data.refresh, { expires: 15 });\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\talert(err);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\t//null\r\n\t\t}\r\n\r\n\t\tif (username === null && loged === true) {\r\n\t\t\taxios\r\n\t\t\t\t.get(`http://localhost:8000/api/uv/${id}/`, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: 'JWT ' + Cookies.get('access_token')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tlocalStorage.setItem('username', res.data.username);\r\n\t\t\t\t\tlocalStorage.setItem('email', res.data.email);\r\n\t\t\t\t\tlocalStorage.setItem('first_name', res.data.first_name);\r\n\t\t\t\t\tlocalStorage.setItem('last_name', res.data.last_name);\r\n\t\t\t\t\tCookies.set('password', res.data.password);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\talert(err);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\t//null\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<MainNav />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}