{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\aleor\\\\Documents\\\\Projects\\\\pbs_1.0\\\\pbs_frontend\\\\src\\\\user\\\\login.jsx\";\nimport { Component } from \"react\";\nimport axiosInstance from \"../axiosApi\";\nimport jwt_decode from \"jwt-decode\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      token: Cookies.get(\"refresh_token\"),\n      user_info_data: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  getUserId(e) {\n    const token = Cookies.get(\"refresh_token\");\n    const decode = jwt_decode(token);\n    Cookies.set(\"user_id\", decode.user_id);\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    axiosInstance.post(\"/gtv/\", {\n      username: this.state.username,\n      password: this.state.password\n    }).then(result => {\n      axiosInstance.defaults.headers[\"Authorization\"] = \"JWT \" + result.data.access;\n      Cookies.set(\"access_token\", result.data.access);\n      Cookies.set(\"refresh_token\", result.data.refresh, {\n        expires: 15\n      });\n    }).then(() => {\n      this.getUserId();\n    }).then(() => {\n      window.setTimeout(() => {\n        window.history.go(0);\n      }, 1000);\n    }).then(() => {}).catch(error => {\n      throw error;\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Login\", /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: \"login-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Username:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"username\",\n            type: \"text\",\n            value: this.state.username,\n            onChange: this.handleChange,\n            placeholder: \"Enter Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Password:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"password\",\n            type: \"password\",\n            value: this.state.password,\n            onChange: this.handleChange,\n            placeholder: \"Enter Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/aleor/Documents/Projects/pbs_1.0/pbs_frontend/src/user/login.jsx"],"names":["Component","axiosInstance","jwt_decode","axios","Cookies","Login","constructor","props","state","username","password","token","get","user_info_data","handleChange","bind","handleSubmit","event","setState","target","name","value","getUserId","e","decode","set","user_id","preventDefault","post","then","result","defaults","headers","data","access","refresh","expires","window","setTimeout","history","go","catch","error","render"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\nimport axiosInstance from \"../axiosApi\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      token: Cookies.get(\"refresh_token\"),\r\n      user_info_data: [],\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  }\r\n\r\n  getUserId(e) {\r\n    const token = Cookies.get(\"refresh_token\");\r\n    const decode = jwt_decode(token);\r\n    Cookies.set(\"user_id\", decode.user_id);\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    axiosInstance\r\n      .post(\"/gtv/\", {\r\n        username: this.state.username,\r\n        password: this.state.password,\r\n      })\r\n      .then((result) => {\r\n        axiosInstance.defaults.headers[\"Authorization\"] =\r\n          \"JWT \" + result.data.access;\r\n        Cookies.set(\"access_token\", result.data.access);\r\n        Cookies.set(\"refresh_token\", result.data.refresh, { expires: 15 });\r\n      })\r\n      .then(() => {\r\n        this.getUserId();\r\n      })\r\n      .then(() => {\r\n        window.setTimeout(() => {\r\n          window.history.go(0);\r\n        }, 1000);\r\n      })\r\n      .then(() => {})\r\n      .catch((error) => {\r\n        throw error;\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        Login\r\n        <form onSubmit={this.handleSubmit} className=\"login-form\">\r\n          <label>\r\n            Username:\r\n            <input\r\n              name=\"username\"\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              onChange={this.handleChange}\r\n              placeholder=\"Enter Username\"\r\n            />\r\n          </label>\r\n          <label>\r\n            Password:\r\n            <input\r\n              name=\"password\"\r\n              type=\"password\"\r\n              value={this.state.password}\r\n              onChange={this.handleChange}\r\n              placeholder=\"Enter Password\"\r\n            />\r\n          </label>\r\n          <input type=\"submit\" value=\"Submit\" />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}